{
    "Drone": {
        "type": [
            "Drone"
        ],
        "description": [
            "Base class for Drone modules"
        ],
        "filename": [
            "../DroneNode/src/droneModules/DroneModule.h"
        ]
    },
    "Depth": {
        "type": [
            "Depth"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Manages a simple Depth sensor (sonar transducer) controlled via Trigger and Echo pins"
        ],
        "guide": [
            "Notes:\nIn the oceans the speed of sound varies between 1,450 and 1,570 metres per second or 0.145 cm per microsecond.\nGiven the transducer requires the sound pulse to travel to the bottom and back the effective distance per microsend is actually halved or 0.0725 cm per microsecond."
        ],
        "config": [
            "// New Depth sensor bound to channel 30\nDepth.new 30\n  name \"Depth\"\n  status true         // enabled\n  interval 1000       // sample once per second\n  pins OUT0_0 OUT0_1  // tigger and echo pins\n  limits 0.25 10      // set sensor range to min=0.25m, max=10m\n  speed 1480          // speed of sound in fresh water = 1480m/s\n  $location [@>5.8]   // subscribe to GPS location\n  distance 5          // publish log entires every 5m\n\n  .publish \"depth\"    // publish the measured depth\n  .publish \"log\"      // publish a combined log entry containing GPS location and depth\n\n  // .publish \"speed\"\n  // .publish \"pins\"\n  // .publish \"limits\"\n  // .publish \"distance\"\n.done"
        ],
        "pub": [
            {
                "address": 10,
                "type": "u8",
                "numValues": 2,
                "name": "pins",
                "description": "Pin connections for the depth module (Trigger, Echo)"
            },
            {
                "address": 11,
                "type": "f",
                "numValues": 1,
                "name": "speed",
                "description": "Set the speed of sound in water (default 1480 for fresh water)"
            },
            {
                "address": 12,
                "type": "f",
                "numValues": 2,
                "name": "limits",
                "description": "Min and max depth limits in meters (Default 0.25 10)"
            },
            {
                "address": 13,
                "type": "f",
                "numValues": 1,
                "name": "depth",
                "description": "Measured depth (or zero if unable to measure)"
            },
            {
                "address": 14,
                "type": "f",
                "numValues": 3,
                "name": "log",
                "description": "Composite log entry combining current GPS location and depth reading into a single param"
            },
            {
                "address": 15,
                "type": "f",
                "numValues": 1,
                "name": "distance",
                "description": "Minimum distance between log entires.  Will only publish a fresh log entry if more than distance from last sample location.  Default 0m."
            }
        ],
        "sub": [
            {
                "address": 20,
                "addrAddress": 21,
                "type": "f",
                "numValues": 2,
                "name": "location",
                "description": "Current location from GPS"
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/DepthModule.h"
        ]
    },
    "Diagnostic": {
        "type": [
            "Diagnostic"
        ],
        "inherits": [
            "I2CBaseModule"
        ],
        "description": [
            "Manages a Diagnostic 128x64 I2C display (1306 driver)"
        ],
        "config": [
            "DIAGNOSTIC.new 6\n  name \"Diagnostic\"\n  interval 200\n  bus 0\n.done"
        ],
        "filename": [
            "../DroneNode/src/droneModules/DiagnosticModule.h"
        ]
    },
    "HMC5883L": {
        "type": [
            "HMC5883L"
        ],
        "inherits": [
            "I2CBaseModule"
        ],
        "description": [
            "Manages a HMC5883L I2C Compass"
        ],
        "config": [
            "HMC5883L.new 6\n  name \"Compass\"\n  interval 200\n  bus 0\n  status 1\n  calibX -3.5 0 2.3\n  calibY -3.6 0 1.7\n  // default location\n  location -1.8 52 100\n  //$location [@>GPS.location]\n  $location [@>5.8]\n  .publish \"heading\"\n  .publish \"vector\"\n  .publish \"calibX\"\n  .publish \"calibY\"\n.done"
        ],
        "pub": [
            {
                "address": 10,
                "type": "f",
                "numValues": 4,
                "name": "vector",
                "description": "Raw magnetic field vector"
            },
            {
                "address": 11,
                "type": "f",
                "numValues": 1,
                "name": "heading",
                "description": "Heading adjusted for magnetic declination"
            },
            {
                "address": 12,
                "type": "f",
                "numValues": 1,
                "name": "declination",
                "description": "Current declination value"
            },
            {
                "address": 13,
                "type": "f",
                "numValues": 3,
                "name": "calibX",
                "description": "Min, center and max magnetic readings for the X axis"
            },
            {
                "address": 14,
                "type": "f",
                "numValues": 3,
                "name": "calibY",
                "description": "Min, center and max magnetic readings for the Y axis"
            },
            {
                "address": 15,
                "type": "f",
                "numValues": 1,
                "name": "trim",
                "description": "Manual calibration value to adjust heading to match hull (e.g. for a misaligned physical mount)"
            },
            {
                "address": 18,
                "type": "f",
                "numValues": 4,
                "name": "limits",
                "description": "Averaged limits at the four quadrants, used to refine the calibration onoine"
            }
        ],
        "sub": [
            {
                "address": 16,
                "addrAddress": 17,
                "type": "f",
                "numValues": 2,
                "name": "location",
                "description": "Current location from GPS"
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/HMC5883LModule.h"
        ]
    },
    "Management": {
        "type": [
            "Management"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Provides overall system management and a pub/sub interface to the DroneModuleManager"
        ],
        "pub": [
            {
                "address": 8,
                "type": "c",
                "numValues": 1,
                "name": "hostname",
                "description": "Hostname of the device"
            },
            {
                "address": 9,
                "type": "c",
                "numValues": 1,
                "name": "build",
                "description": "Git commit hash at the time the firmware was built"
            },
            {
                "address": 10,
                "type": "u8",
                "numValues": 1,
                "name": "reset",
                "description": "Set to 1 to trigger a reset"
            },
            {
                "address": 11,
                "type": "u32",
                "numValues": 1,
                "name": "heap",
                "description": "Current size of heap (i.e. free memory)"
            },
            {
                "address": 12,
                "type": "u8",
                "numValues": 4,
                "name": "IP",
                "description": "IP address"
            },
            {
                "address": 13,
                "type": "u32",
                "numValues": 1,
                "name": "uptime",
                "description": "Uptime in seconds"
            },
            {
                "address": 14,
                "type": "f",
                "numValues": 1,
                "name": "publishRate",
                "description": "Rate of messages published per second"
            },
            {
                "address": 15,
                "type": "u32",
                "numValues": 1,
                "name": "choked",
                "description": "Number of times a channel queue has choked (rejected a msg becuse full)"
            },
            {
                "address": 16,
                "type": "u8",
                "numValues": 1,
                "name": "discovery",
                "description": "Enable/disable node discovery process.  Set to 1 to enable, or 0 to disable."
            },
            {
                "address": 17,
                "type": "c",
                "numValues": 1,
                "name": "macro",
                "description": "Set to the path to a macro file (.txt file) to run the associated macro.  Note - the macro must be loaded first (e.g. via config.txt)."
            },
            {
                "address": 18,
                "type": "u8",
                "numValues": 1,
                "name": "wifi",
                "description": "Enable/disable wifi. Set to 1 to enable, or 0 to disable."
            },
            {
                "address": 19,
                "type": "u32",
                "numValues": 1,
                "name": "sleep",
                "description": "How long to sleep in main loop - uses light sleep"
            },
            {
                "address": 20,
                "type": "u32",
                "numValues": 1,
                "name": "cpu",
                "description": "CPU freq in MHz, valid values 240, 160, 80"
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/ManagementModule.h"
        ]
    },
    "Motor": {
        "type": [
            "Motor"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Manages a Motor via an H Bridge module using PWM"
        ],
        "config": [
            "Motor.new 11\n  name \"LeftMotor\"\n  interval 50\n  pins OUT0_0 OUT0_1 DAC0_0\n  PWMChannel 15\n  limits -0.7 0.7\n  deadband 0.3\n  $speed [@>10.8]\n\n  // publish\n  .publish \"speed\"\n.done"
        ],
        "pub": [
            {
                "address": 10,
                "type": "u8",
                "numValues": 3,
                "name": "pins",
                "description": "Pin connections for the H Bridge (A, B, EN)"
            },
            {
                "address": 11,
                "type": "u8",
                "numValues": 1,
                "name": "PWMChannel",
                "description": "Which ESP32 PWM channel to use (default 15)"
            },
            {
                "address": 12,
                "type": "f",
                "numValues": 2,
                "name": "limits",
                "description": "Min and max speed limits in range -1 to 1 (default -1 1)"
            },
            {
                "address": 13,
                "type": "f",
                "numValues": 1,
                "name": "deadband",
                "description": "Input range within which to set the motor output to zero, interpreted abs(input).  Default 0.3"
            }
        ],
        "sub": [
            {
                "address": 8,
                "addrAddress": 9,
                "type": "f",
                "numValues": 1,
                "name": "speed",
                "description": "Desired Motor speed in range -1 to 1"
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/MotorModule.h"
        ]
    },
    "NMEA": {
        "type": [
            "NMEA"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Manages a serial NMEA GPS device"
        ],
        "config": [
            "NMEA.new 7\n  name \"GPS\"\n  interval 1000\n  port 2\n  baud 9600\n  .publish \"location\"\n  .publish \"satellites\"\n  .publish \"HDOP\"\n.done"
        ],
        "pub": [
            {
                "address": 8,
                "type": "f",
                "numValues": 2,
                "name": "location",
                "description": "Current GPS location"
            },
            {
                "address": 9,
                "type": "u8",
                "numValues": 1,
                "name": "satellites",
                "description": "Number of satellites used for fix"
            },
            {
                "address": 10,
                "type": "f",
                "numValues": 1,
                "name": "heading",
                "description": "Current heading over ground"
            },
            {
                "address": 11,
                "type": "f",
                "numValues": 1,
                "name": "speed",
                "description": "Current speed over ground"
            },
            {
                "address": 12,
                "type": "f",
                "numValues": 1,
                "name": "HDOP",
                "description": "Current Horizontal Dilution of Precision"
            },
            {
                "address": 13,
                "type": "u8",
                "numValues": 1,
                "name": "port",
                "description": "Which serial port to use (0,1 or 2)"
            },
            {
                "address": 14,
                "type": "u32",
                "numValues": 1,
                "name": "baud",
                "description": "Baud rate to use, normally 9600"
            },
            {
                "address": 15,
                "type": "f",
                "numValues": 3,
                "name": "fix",
                "description": "Fix location - to use as basis for differential GPS signal"
            }
        ],
        "sub": [
            {
                "address": 20,
                "addrAddress": 21,
                "type": "f",
                "numValues": 3,
                "name": "correction",
                "description": "If fix location is set then this is the difference between live GPS and known location, for other nodes to subscribe to.  If no fix location, then this can be subbed to a base station correction param."
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/NMEAModule.h"
        ]
    },
    "Nav": {
        "type": [
            "Nav"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Managen navigation between waypoints accounting for crosswind drift"
        ],
        "guide": [
            "Target waypoints are defined in terms of Lon Lat and target Radius in meters."
        ],
        "config": [
            "Nav.new 9\n  name \"Nav\"\n  status 1\n  interval 50\n  $location [@>7.8]\n  target -1.7458734889 51.541622044 5\n  crosswind 0.2\n  correction 20\n  wind 0\n  .publish \"target\"\n  .publish \"location\"\n  .publish \"heading\"\n  .publish \"distance\"\n  .publish \"mode\"\n  .publish \"last\"\n  .publish \"home\"\n  .publish \"crosstrack\"\n  .publish \"correction\"\n  .publish \"wind\"\n  .publish \"crosswind\"\n  .publish \"adjHeading\"\n.done"
        ],
        "filename": [
            "../DroneNode/src/droneModules/NavModule.h"
        ]
    },
    "Status": {
        "type": [
            "Status"
        ],
        "inherits": [
            "Drone"
        ],
        "description": [
            "Monitors up to four parameters and publishes a corresponding status scene to a Neopixel module"
        ],
        "pub": [
            {
                "address": 8,
                "type": "u8",
                "numValues": 16,
                "name": "scene",
                "description": "Status scene for a Neopixel module to subscribe to"
            },
            {
                "address": 10,
                "type": "f",
                "numValues": 1,
                "name": "value1",
                "description": "Threshold for sub1"
            },
            {
                "address": 11,
                "type": "f",
                "numValues": 1,
                "name": "value2",
                "description": "Threshold for sub2"
            },
            {
                "address": 12,
                "type": "f",
                "numValues": 1,
                "name": "value3",
                "description": "Threshold for sub3"
            },
            {
                "address": 13,
                "type": "f",
                "numValues": 1,
                "name": "value4",
                "description": "Threshold for sub4"
            }
        ],
        "sub": [
            {
                "address": 20,
                "addrAddress": 21,
                "type": "f",
                "numValues": 2,
                "name": "sub1",
                "description": "First parameter to monitor for status"
            },
            {
                "address": 22,
                "addrAddress": 23,
                "type": "f",
                "numValues": 2,
                "name": "sub2",
                "description": "First parameter to monitor for status"
            },
            {
                "address": 24,
                "addrAddress": 25,
                "type": "f",
                "numValues": 2,
                "name": "sub3",
                "description": "First parameter to monitor for status"
            },
            {
                "address": 26,
                "addrAddress": 27,
                "type": "f",
                "numValues": 2,
                "name": "sub4",
                "description": "First parameter to monitor for status"
            }
        ],
        "filename": [
            "../DroneNode/src/droneModules/StatusModule.h"
        ]
    }
}